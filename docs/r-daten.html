<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Wissenschaftliche Arbeitstechniken</title>
  <meta name="description" content="Wissenschaftliche Arbeitstechniken">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Wissenschaftliche Arbeitstechniken" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Wissenschaftliche Arbeitstechniken" />
  
  
  

<meta name="author" content="Mittelbau, Institut für Politikwissenschaft, Universität Bern">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="r-vis.html">
<link rel="next" href="r-vis2.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="font-awesome.min.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Einleitung</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#ziel"><i class="fa fa-check"></i><b>1.1</b> Ziel</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#aufbau"><i class="fa fa-check"></i><b>1.2</b> Aufbau</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#texthilfen"><i class="fa fa-check"></i><b>1.3</b> Texthilfen</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#zusammenstellung-der-inhalte"><i class="fa fa-check"></i><b>1.4</b> Zusammenstellung der Inhalte</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="forschungsfrage.html"><a href="forschungsfrage.html"><i class="fa fa-check"></i><b>2</b> Forschungsfrage</a><ul>
<li class="chapter" data-level="2.1" data-path="forschungsfrage.html"><a href="forschungsfrage.html#aufbau-einer-forschungsfrage"><i class="fa fa-check"></i><b>2.1</b> Aufbau einer Forschungsfrage</a></li>
<li class="chapter" data-level="2.2" data-path="forschungsfrage.html"><a href="forschungsfrage.html#gute-und-schlechte-forschungsfragen"><i class="fa fa-check"></i><b>2.2</b> Gute und Schlechte Forschungsfragen</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="literaturrecherche.html"><a href="literaturrecherche.html"><i class="fa fa-check"></i><b>3</b> Literaturrecherche</a><ul>
<li class="chapter" data-level="3.1" data-path="literaturrecherche.html"><a href="literaturrecherche.html#quellen"><i class="fa fa-check"></i><b>3.1</b> Quellen</a></li>
<li class="chapter" data-level="3.2" data-path="literaturrecherche.html"><a href="literaturrecherche.html#vorgehen"><i class="fa fa-check"></i><b>3.2</b> Vorgehen</a></li>
<li class="chapter" data-level="3.3" data-path="literaturrecherche.html"><a href="literaturrecherche.html#literatur-online-finden"><i class="fa fa-check"></i><b>3.3</b> Literatur online finden</a><ul>
<li class="chapter" data-level="3.3.1" data-path="literaturrecherche.html"><a href="literaturrecherche.html#datenbanken"><i class="fa fa-check"></i><b>3.3.1</b> Datenbanken</a></li>
<li class="chapter" data-level="3.3.2" data-path="literaturrecherche.html"><a href="literaturrecherche.html#bibliotheken"><i class="fa fa-check"></i><b>3.3.2</b> Bibliotheken</a></li>
<li class="chapter" data-level="3.3.3" data-path="literaturrecherche.html"><a href="literaturrecherche.html#google-scholar"><i class="fa fa-check"></i><b>3.3.3</b> Google Scholar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="quellenbelege.html"><a href="quellenbelege.html"><i class="fa fa-check"></i><b>4</b> Quellenbelege</a><ul>
<li class="chapter" data-level="4.1" data-path="quellenbelege.html"><a href="quellenbelege.html#wo-stehen-quellenbelege"><i class="fa fa-check"></i><b>4.1</b> Wo stehen Quellenbelege?</a></li>
<li class="chapter" data-level="4.2" data-path="quellenbelege.html"><a href="quellenbelege.html#wann-braucht-man-quellenbelege"><i class="fa fa-check"></i><b>4.2</b> Wann braucht man Quellenbelege?</a></li>
<li class="chapter" data-level="4.3" data-path="quellenbelege.html"><a href="quellenbelege.html#zitate-belegen"><i class="fa fa-check"></i><b>4.3</b> Zitate belegen</a></li>
<li class="chapter" data-level="4.4" data-path="quellenbelege.html"><a href="quellenbelege.html#paraphrasen"><i class="fa fa-check"></i><b>4.4</b> Paraphrasen</a></li>
<li class="chapter" data-level="4.5" data-path="quellenbelege.html"><a href="quellenbelege.html#verweise"><i class="fa fa-check"></i><b>4.5</b> Verweise</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="zitieren.html"><a href="zitieren.html"><i class="fa fa-check"></i><b>5</b> Zitieren</a><ul>
<li class="chapter" data-level="5.1" data-path="zitieren.html"><a href="zitieren.html#bucher-zitieren"><i class="fa fa-check"></i><b>5.1</b> Bücher zitieren</a></li>
<li class="chapter" data-level="5.2" data-path="zitieren.html"><a href="zitieren.html#sammelbander-zitieren"><i class="fa fa-check"></i><b>5.2</b> Sammelbänder zitieren</a></li>
<li class="chapter" data-level="5.3" data-path="zitieren.html"><a href="zitieren.html#zeitschriftenartikel-zitieren"><i class="fa fa-check"></i><b>5.3</b> Zeitschriftenartikel zitieren</a></li>
<li class="chapter" data-level="5.4" data-path="zitieren.html"><a href="zitieren.html#internetseiten-zitieren"><i class="fa fa-check"></i><b>5.4</b> Internetseiten zitieren</a></li>
<li class="chapter" data-level="5.5" data-path="zitieren.html"><a href="zitieren.html#ein-datensatz-zitieren"><i class="fa fa-check"></i><b>5.5</b> Ein Datensatz zitieren</a></li>
<li class="chapter" data-level="5.6" data-path="zitieren.html"><a href="zitieren.html#ein-r-packet-zitieren"><i class="fa fa-check"></i><b>5.6</b> Ein R-Packet zitieren</a></li>
<li class="chapter" data-level="5.7" data-path="zitieren.html"><a href="zitieren.html#gangige-probleme-beim-zitieren"><i class="fa fa-check"></i><b>5.7</b> Gängige Probleme beim Zitieren</a><ul>
<li class="chapter" data-level="5.7.1" data-path="zitieren.html"><a href="zitieren.html#autorautorin-ist-unklar"><i class="fa fa-check"></i><b>5.7.1</b> Autor/Autorin ist unklar</a></li>
<li class="chapter" data-level="5.7.2" data-path="zitieren.html"><a href="zitieren.html#quelle-hat-kein-datum"><i class="fa fa-check"></i><b>5.7.2</b> Quelle hat kein Datum</a></li>
<li class="chapter" data-level="5.7.3" data-path="zitieren.html"><a href="zitieren.html#autor-ist-eine-organisation"><i class="fa fa-check"></i><b>5.7.3</b> Autor ist eine Organisation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="literaturverzeichniserstellen.html"><a href="literaturverzeichniserstellen.html"><i class="fa fa-check"></i><b>6</b> Literaturverzeichnis erstellen</a></li>
<li class="chapter" data-level="7" data-path="literaturverwaltung.html"><a href="literaturverwaltung.html"><i class="fa fa-check"></i><b>7</b> Literaturverwaltung</a></li>
<li class="chapter" data-level="8" data-path="plagiate.html"><a href="plagiate.html"><i class="fa fa-check"></i><b>8</b> Plagiate</a></li>
<li class="chapter" data-level="9" data-path="placeholder.html"><a href="placeholder.html"><i class="fa fa-check"></i><b>9</b> Placeholder</a></li>
<li class="chapter" data-level="10" data-path="r-start.html"><a href="r-start.html"><i class="fa fa-check"></i><b>10</b> Einstieg in R</a><ul>
<li class="chapter" data-level="10.1" data-path="r-start.html"><a href="r-start.html#vorbereitung"><i class="fa fa-check"></i><b>10.1</b> Vorbereitung</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="datenanalyse.html"><a href="datenanalyse.html"><i class="fa fa-check"></i><b>11</b> Datenanalyse</a><ul>
<li class="chapter" data-level="11.1" data-path="datenanalyse.html"><a href="datenanalyse.html#daten-anschauen"><i class="fa fa-check"></i><b>11.1</b> Daten anschauen</a></li>
<li class="chapter" data-level="11.2" data-path="datenanalyse.html"><a href="datenanalyse.html#daten-vergleichen"><i class="fa fa-check"></i><b>11.2</b> Daten vergleichen</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="r-vis.html"><a href="r-vis.html"><i class="fa fa-check"></i><b>12</b> Daten visualisieren</a><ul>
<li class="chapter" data-level="12.1" data-path="r-vis.html"><a href="r-vis.html#histogramme"><i class="fa fa-check"></i><b>12.1</b> Histogramme</a></li>
<li class="chapter" data-level="12.2" data-path="r-vis.html"><a href="r-vis.html#bar-graph"><i class="fa fa-check"></i><b>12.2</b> Bar Graph</a></li>
<li class="chapter" data-level="12.3" data-path="r-vis.html"><a href="r-vis.html#scatterplot"><i class="fa fa-check"></i><b>12.3</b> Scatterplot</a></li>
<li class="chapter" data-level="12.4" data-path="r-vis.html"><a href="r-vis.html#grafiken-speichern"><i class="fa fa-check"></i><b>12.4</b> Grafiken speichern</a></li>
<li class="chapter" data-level="12.5" data-path="r-vis.html"><a href="r-vis.html#zusammenfassung"><i class="fa fa-check"></i><b>12.5</b> Zusammenfassung</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="r-daten.html"><a href="r-daten.html"><i class="fa fa-check"></i><b>13</b> Daten säubern</a><ul>
<li class="chapter" data-level="13.1" data-path="r-daten.html"><a href="r-daten.html#datensatze-laden"><i class="fa fa-check"></i><b>13.1</b> Datensätze laden</a></li>
<li class="chapter" data-level="13.2" data-path="r-daten.html"><a href="r-daten.html#beobachtungen-und-variablen-auswahlen"><i class="fa fa-check"></i><b>13.2</b> Beobachtungen und Variablen auswählen</a></li>
<li class="chapter" data-level="13.3" data-path="r-daten.html"><a href="r-daten.html#variablen-bilden-und-recodieren"><i class="fa fa-check"></i><b>13.3</b> Variablen bilden und recodieren</a></li>
<li class="chapter" data-level="13.4" data-path="r-daten.html"><a href="r-daten.html#daten-gruppieren-und-zusammenfassen"><i class="fa fa-check"></i><b>13.4</b> Daten gruppieren und zusammenfassen</a></li>
<li class="chapter" data-level="13.5" data-path="r-daten.html"><a href="r-daten.html#deskriptive-statistik"><i class="fa fa-check"></i><b>13.5</b> Deskriptive Statistik</a></li>
<li class="chapter" data-level="13.6" data-path="r-daten.html"><a href="r-daten.html#ubung"><i class="fa fa-check"></i><b>13.6</b> Übung</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="r-vis2.html"><a href="r-vis2.html"><i class="fa fa-check"></i><b>14</b> Darstellung verfeinern</a><ul>
<li class="chapter" data-level="14.1" data-path="r-vis2.html"><a href="r-vis2.html#achsen"><i class="fa fa-check"></i><b>14.1</b> Achsen</a></li>
<li class="chapter" data-level="14.2" data-path="r-vis2.html"><a href="r-vis2.html#farben"><i class="fa fa-check"></i><b>14.2</b> Farben</a></li>
<li class="chapter" data-level="14.3" data-path="r-vis2.html"><a href="r-vis2.html#marker--und-linientypen"><i class="fa fa-check"></i><b>14.3</b> Marker- und Linientypen</a></li>
<li class="chapter" data-level="14.4" data-path="r-vis2.html"><a href="r-vis2.html#beschriftungen"><i class="fa fa-check"></i><b>14.4</b> Beschriftungen</a></li>
<li class="chapter" data-level="14.5" data-path="r-vis2.html"><a href="r-vis2.html#themen"><i class="fa fa-check"></i><b>14.5</b> Themen</a></li>
<li class="chapter" data-level="14.6" data-path="r-vis2.html"><a href="r-vis2.html#ubung-1"><i class="fa fa-check"></i><b>14.6</b> Übung</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Wissenschaftliche Arbeitstechniken</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-daten" class="section level1">
<h1><span class="header-section-number">13</span> Daten säubern</h1>
<p>Nicht immer sind Datensätze eins zu eins verwendbar für statistische Auswertungen. Meist - wie auch beim Voto-Datensatz - müssen wir zuerst Variablen recodieren, um diese besser auswerten zu können, oder wollen neue Variablen bilden. Ein paar wichtige Befehle dafür werden in diesem Kapitel kurz vorgestellt.</p>
<p><em>Dieses Kapitel folgt in etwa Chapter 3 des Buches <a href="http://r4ds.had.co.nz/transform.html">R for Data Science</a></em></p>
<div id="datensatze-laden" class="section level2">
<h2><span class="header-section-number">13.1</span> Datensätze laden</h2>
<p>Beginnen wir mit der Frage, wie wir überhaupt Daten in R reinladen können. Die Daten für die Grafiken wurden mit dem Befehl <code>read.table()</code> reingeladen, weil diese als <code>.csv</code>-File zur Verfügung standen. Teilweise müssen wir aber Textdateien, Excel-Files, Stata-Daten und viele weitere Varianten in R reinladen. Für fast alle Möglichkeiten gibt es auch spezifische Funktionen (beispielsweise ein <code>read.dta()</code> für Stata-Daten in der Package <code>foreign</code>), die mit einer Google-Suche zu finden sind.</p>
<p>Bleiben wir aber bei der generelleren Variante, einer Tabelle mit Daten, wobei die Zellen beispielsweise mit Kommas, Strichpunkte oder Tabs getrennt sind. In diesem Fall können wir die Grundfunktion <code>read.table()</code> verwenden.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">voto &lt;-<span class="st"> </span><span class="co"># vor dem Pfeil kommt wie üblich der Name des Objekts</span>
<span class="st">  </span><span class="kw">read.table</span>(<span class="st">&quot;voto855_sample.csv&quot;</span>, <span class="co"># Pfad zur Datei</span>
             <span class="dt">header =</span> T, <span class="co"># falls im csv-File Variablennamen drin sind: T/TRUE</span>
             <span class="dt">sep =</span> <span class="st">&quot;;&quot;</span>, <span class="co"># wie sind die Zellen getrennt (separated)? </span>
             <span class="dt">stringsAsFactors =</span> F, <span class="co"># Texte als Faktoren: F/FALSE</span>
             <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span> <span class="co"># welche Textkodierung</span>
  ) <span class="co"># Klammer nicht vergessen!</span></code></pre></div>
<p>Mit demselben Befehl können unterschiedlichste Datenfiles geöffnet werden. Grundsätzlich, falls unbekannt, lohnt es sich, den Datensatz zuerst mit einem Texteditor zu öffnen, um die Struktur zu sehen.</p>
<p>Haben wir mit R gearbeitet und einen Datensatz so bearbeitet, wie wir ihn gebrauchen können, lohnt es sich, diese Daten auch neu abzuspeichern. Einerseits können wir wiederum ein csv-File abspeichern, wobei wir simultan mit <code>write.table()</code> vorgehen. Die andere Möglichkeit ist, alle Objekte, Funktionen etc., also die aktuelle Arbeitsumgebung wie in der Kachel “Environment” angezeigt, abzuspeichern. Dafür speichern wir die Daten als <code>.RData</code>-File ab.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># csv-File schreiben, sodass dieses in Tabellenprogrammen geöffnet werden kann</span>
<span class="kw">write.table</span>( <span class="co"># da wir das ja extern machen, müssen wir kein Objekt bilden mit &lt;-</span>
  voto, <span class="co"># welches Objekt soll abgespeichert werden?</span>
  <span class="dt">file=</span><span class="st">&quot;sample.csv&quot;</span>, <span class="co"># wo soll das Objekt abgespeichert werden?</span>
  <span class="dt">sep=</span><span class="st">&quot;;&quot;</span>, <span class="co"># wie sollen die Zellen getrennt werden?</span>
  <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span> <span class="co"># welche Textkodierung</span>
  ) <span class="co"># Klammer nicht vergessen!</span>

<span class="co"># .RData-Image speichern</span>
<span class="co"># speichert alles ab, nicht nur ein Objekt</span>
<span class="kw">save.image</span>(<span class="st">&quot;sample.RData&quot;</span>)</code></pre></div>
<div class="rmdcomment">
<p>
Wer auf der Suche nach noch mehr Möglichkeiten zum Einlesen von Daten ist, soll sich mit der Package <code>tidyr</code> vertraut machen. In dieser sind auch moderne Befehle drin, um Datensätze umzuformen/reshapen.
</p>
</div>
</div>
<div id="beobachtungen-und-variablen-auswahlen" class="section level2">
<h2><span class="header-section-number">13.2</span> Beobachtungen und Variablen auswählen</h2>
<p>Nicht immer wollen wir alle Beobachtungen oder alle Variablen in einem Datensatz anschauen - wie bei den Grafiken, wo wir uns für vier Variablen interessiert haben. In <code>dplyr</code> gibt es mit den Befehlen <code>filter()</code> und <code>select()</code> intuitive Funktionen, um das durchzuführen.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># filter() wählt Daten nach Bedingungen aus (rows)</span>
voto.frauen &lt;-<span class="st"> </span><span class="kw">filter</span>(voto, sex<span class="op">==</span><span class="st">&quot;2 woman&quot;</span>)
voto.jungefrauen &lt;-<span class="st"> </span><span class="kw">filter</span>(voto, sex<span class="op">==</span><span class="st">&quot;2 woman&quot;</span>, birthyear<span class="op">&gt;</span><span class="dv">1979</span>)

<span class="co"># select() wählt Variablen aus (cols)</span>
voto.partic &lt;-<span class="st"> </span><span class="kw">select</span>(voto, personid_<span class="dv">4</span>, part, part2)

<span class="co"># Variablen löschen</span>
voto.red &lt;-<span class="st"> </span><span class="kw">select</span>(voto, <span class="op">-</span>trust_<span class="dv">1</span>, <span class="op">-</span>importance1, <span class="op">-</span>value3, <span class="op">-</span>value11)</code></pre></div>
<p>Dabei gibt es einige Operatoren, die wohl nicht unbekannt sind:</p>
<ul>
<li><code>&gt;</code> ist grösser als, sowie <code>&gt;=</code> grösser gleich,</li>
<li><code>&lt;</code> ist kleiner als, sowie <code>&lt;=</code> kleiner gleich,</li>
<li><code>==</code> steht für “entspricht”,</li>
<li><code>!=</code> wiederum steht für “enspricht nicht”.</li>
</ul>
<p>Kombiniert werden Bedingungen ebenfalls mit <code>&amp;</code> (und) sowie <code>|</code> (oder). Zuletzt gibt es noch eine spezielle Funktion, um <code>NA</code>, also Missings, zu finden. Mit <code>is.na()</code> und der Umkehrung <code>!is.na()</code> können wir fehlende Werte finden. Haben wir in einer Variable viele fehlende Beobachtungen (z.B. das Einkommen), können wir diese Beobachtungen ausschliessen, und dann Auswertungen mit den neuen, vollständigen Daten machen.</p>
<p>Details könnt ihr rausfinden, indem ihr <code>?filter</code> und <code>?select</code> tippt.</p>
</div>
<div id="variablen-bilden-und-recodieren" class="section level2">
<h2><span class="header-section-number">13.3</span> Variablen bilden und recodieren</h2>
<p>Oft wollen wir Variablen so haben, dass sie für uns besser ausgewertet werden können. Beim Einstieg haben wir beispielsweise die Partizipation an zehn Abstimmungen als Zahlenwerte abgespeichert, damit wir diese in der Grafik einbinden können.</p>
<p>Zusätzliche Beispiele, wieso Variablen recodiert oder neu gebildet werden, sind:</p>
<ul>
<li>eine Dummy-Variable mit ist/ist nicht, z.B. eine Variable für Frauen, die 1 ist, wenn die Beobachtung von einer Frau stammt, oder 0, wenn es ein Mann ist;</li>
<li>eine Variable, welche das Alter anzeigt, statt das Geburtsjahr;</li>
<li>eine Variable mit Alterskategorien, statt einem fortlaufenden Alter;</li>
<li>weil wir andere Labels haben wollen, als solche, die in den Daten drin sind;</li>
<li>und viele weitere Möglichkeiten.</li>
</ul>
<p>R bietet für jeden Geschmack Möglichkeiten, wie Variablen gebildet und recodiert werden können. Einige zentrale Beispiele sind im nächsten Code aufgezeigt:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Dummy-Variablen</span>
<span class="co"># Frau == 1 und Mann == 0</span>
voto<span class="op">$</span>frau &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(voto<span class="op">$</span>sex <span class="op">==</span><span class="st"> &quot;2 woman&quot;</span>)
<span class="co"># alle Frauen, welche mind. 7 Mal teilgenommen haben</span>
voto<span class="op">$</span>frau.part &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(voto<span class="op">$</span>sex <span class="op">==</span><span class="st"> &quot;2 woman&quot;</span> <span class="op">&amp;</span><span class="st"> </span>voto<span class="op">$</span>part10 <span class="op">&gt;=</span><span class="st"> </span><span class="dv">7</span>)
<span class="co"># oder wir wollen voto$part einfacher verwendbar machen, hat partizipiert == 1</span>
voto<span class="op">$</span>participated &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(voto<span class="op">$</span>part <span class="op">==</span><span class="st"> &quot;1 participated&quot;</span>)

<span class="co"># Berechnungen machen</span>
<span class="co"># Alter statt Geburtsjahr (präziser wäre, auch den Monat zu berücksichtigen)</span>
voto<span class="op">$</span>age &lt;-<span class="st"> </span><span class="dv">2017</span> <span class="op">-</span><span class="st"> </span>voto<span class="op">$</span>birthyear
<span class="co"># Grundsätzlich funktioniert R wie Algebra mit Platzhaltern, </span>
<span class="co"># das wäre also so etwas wie y = 2017 - x, </span>
<span class="co"># nur das y und x nicht nur einzelne Werte sind, sondern Vektoren mit n Werten</span>

<span class="co"># Kategorien bilden</span>
<span class="co"># per logische Bedingung</span>
voto<span class="op">$</span>agecat &lt;-<span class="st"> </span><span class="ot">NA</span>
voto<span class="op">$</span>agecat[voto<span class="op">$</span>age <span class="op">&gt;=</span><span class="st"> </span><span class="dv">18</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
voto<span class="op">$</span>agecat[voto<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">35</span>] &lt;-<span class="st"> </span><span class="dv">2</span>
voto<span class="op">$</span>agecat[voto<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">50</span>] &lt;-<span class="st"> </span><span class="dv">3</span>
voto<span class="op">$</span>agecat[voto<span class="op">$</span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">65</span>] &lt;-<span class="st"> </span><span class="dv">4</span>

<span class="co"># Variable per recode-Befehl neu formulieren</span>
voto<span class="op">$</span>income &lt;-<span class="st"> </span><span class="kw">recode</span>(voto<span class="op">$</span>income, 
                      <span class="st">&quot;01 less than 2&#39;000 CHF&quot;</span> =<span class="st"> &quot;&lt;4&#39;000 CHF&quot;</span>,
                      <span class="st">&quot;02 2&#39;001-3&#39;000 CHF&quot;</span> =<span class="st"> &quot;&lt;4&#39;000 CHF&quot;</span>,
                      <span class="st">&quot;03 3&#39;001-4&#39;000 CHF&quot;</span> =<span class="st"> &quot;&lt;4&#39;000 CHF&quot;</span>,
                      <span class="st">&quot;04 4&#39;001-5&#39;000 CHF&quot;</span> =<span class="st"> &quot;4&#39;001-8&#39;000 CHF&quot;</span>,
                      <span class="st">&quot;05 5&#39;001-6&#39;000 CHF&quot;</span> =<span class="st"> &quot;4&#39;001-8&#39;000 CHF&quot;</span>,
                      <span class="st">&quot;06 6&#39;001-7&#39;000 CHF&quot;</span> =<span class="st"> &quot;4&#39;001-8&#39;000 CHF&quot;</span>,
                      <span class="st">&quot;07 7&#39;001-8&#39;000 CHF&quot;</span> =<span class="st"> &quot;4&#39;001-8&#39;000 CHF&quot;</span>,
                      <span class="st">&quot;08 8&#39;001-9&#39;000 CHF&quot;</span> =<span class="st"> &quot;8&#39;001-12&#39;000 CHF&quot;</span>,
                      <span class="st">&quot;09 9&#39;001-10&#39;000 CHF&quot;</span> =<span class="st"> &quot;8&#39;001-12&#39;000 CHF&quot;</span>,
                      <span class="st">&quot;10 10&#39;001-11&#39;000 CHF&quot;</span> =<span class="st"> &quot;8&#39;001-12&#39;000 CHF&quot;</span>,
                      <span class="st">&quot;11 11&#39;001-12&#39;000 CHF&quot;</span> =<span class="st"> &quot;8&#39;001-12&#39;000 CHF&quot;</span>,
                      <span class="st">&quot;12 12&#39;001-13&#39;000 CHF&quot;</span> =<span class="st"> &quot;&gt;12&#39;001 CHF&quot;</span>,
                      <span class="st">&quot;13 13&#39;001-14&#39;000 CHF&quot;</span> =<span class="st"> &quot;&gt;12&#39;001 CHF&quot;</span>,
                      <span class="st">&quot;14 14&#39;001-15&#39;000 CHF&quot;</span> =<span class="st"> &quot;&gt;12&#39;001 CHF&quot;</span>,
                      <span class="st">&quot;15 more than 15&#39;000 CHF&quot;</span> =<span class="st"> &quot;&gt;12&#39;001 CHF&quot;</span>,
                      <span class="st">&quot;98 don&#39;t know&quot;</span> =<span class="st"> </span><span class="ot">NA_character_</span>,
                      <span class="st">&quot;99 no answer&quot;</span> =<span class="st"> </span><span class="ot">NA_character_</span>
                      ) </code></pre></div>
<p>Wenn wir jetzt die Variablen im Datensatz noch einmal anschauen, sehen wir auch, dass diese unterschiedliche “Typen” haben. Per <code>str(voto)</code> sehen wir nach den Variablennamen jeweils eine Abkürzung, welche uns angibt, was das für Variablen sind. Wichtige Abkürzungen sind:</p>
<ul>
<li><code>int</code> für Integer, <code>num</code> für Numerisch, sowie <code>dbl</code> für reale Zahlen, was also jeweils Zahlen repräsentieren,</li>
<li><code>chr</code> steht für Textstrings,</li>
<li><code>fctr</code> für Faktoren mit verschiedenen Levels, also im Hintergrund eine Zahl, die ein Label hat,</li>
<li>und viele weitere, beispielsweise für Daten, Zeit, und logische Werte, also TRUE und FALSE.</li>
</ul>
<p>Viele weitere Möglichkeiten bildet in <code>dplyr</code> der Befehl <code>mutate()</code>, auf den wir hier aber nicht näher eingehen werden. Mehr über <code>?mutate</code> verrät die Hilfeseite.</p>
</div>
<div id="daten-gruppieren-und-zusammenfassen" class="section level2">
<h2><span class="header-section-number">13.4</span> Daten gruppieren und zusammenfassen</h2>
<p>Neben den bereits kennengelernten Möglichkeiten, Daten zusammenzufassen, bietet <code>dplyr</code> auch die Möglichkeit, mit dem Befehl <code>summarize()</code> zu Werten wie Mittelwert, Median, Quantile etc. zu kommen. Insbesondere in Zusammenarbeit mit <code>group_by()</code> ist dies ein sehr schneller Ansatz, um zu wichtigen deskriptiven Werten zu kommen.</p>
<p>Hier kommen neu Ketten ins Spiel. Anstatt immer alle Zwischenschritte abzuspeichern, können wir die Resultate einer Berechnung direkt weiter verwenden. Um dies zu machen, verwenden wir die sogenannte <em>Pipe</em>, <code>%&gt;%</code>. Diese kann übrigens per Ctrl+Shift+M eingefügt werden.</p>
<p>Grundsätzlich entspricht eine Pipe %&gt;% im Code etwa einem “und dann”. Zuerst gruppieren wir Daten, und dann werden diese zusammengefasst. In mathematischer Notation entsprechen <code>x %&gt;% f(y)</code> sowie <code>f(x, y)</code>, wobei das Spiel noch weiter geführt werden kann. Aber direkt ein Beispiel:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Partizipation pro Altersgruppe und Geschlecht</span>
voto <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># nimm das Objekt voto und reiche es weiter zur nächsten Funktion</span>
<span class="st">  </span><span class="kw">group_by</span>(agecat, frau) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># gruppiere nach Alterskategorie, dann nach Frau</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean=</span><span class="kw">mean</span>(participated)) <span class="co"># bilde ein Mittelwert der Partizipation</span></code></pre></div>
<pre><code>## # A tibble: 8 x 3
## # Groups:   agecat [?]
##   agecat  frau      mean
##    &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;
## 1      1     0 0.5000000
## 2      1     1 0.6666667
## 3      2     0 0.6521739
## 4      2     1 0.4800000
## 5      3     0 0.5416667
## 6      3     1 0.5862069
## 7      4     0 0.8529412
## 8      4     1 0.7500000</code></pre>
<p>So haben wir jetzt den Mittelwert pro Alterskategorie nach Geschlecht, da wir zwei Funktionen miteinander verbinden konnten. Wenn wir möchten, können wir diese Werte auch als neues Objekt abspeichern und später weiterverwenden, beispielsweise in einer Grafik. Dann würden wir in der ersten Zeile einfach <code>meanpart &lt;- voto %&gt;%</code> ergänzen.</p>
<p>Im <code>summarize()</code>-Befehl können wir auch mehrere Werte gleichzeitig berechnen.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">partsum &lt;-<span class="st"> </span>voto <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(agecat, frau) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean=</span><span class="kw">mean</span>(participated), 
            <span class="dt">var=</span><span class="kw">var</span>(participated), 
            <span class="dt">cases=</span><span class="kw">n</span>())
partsum</code></pre></div>
<pre><code>## # A tibble: 8 x 5
## # Groups:   agecat [?]
##   agecat  frau      mean       var cases
##    &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt;
## 1      1     0 0.5000000 0.2727273    12
## 2      1     1 0.6666667 0.2333333    21
## 3      2     0 0.6521739 0.2371542    23
## 4      2     1 0.4800000 0.2600000    25
## 5      3     0 0.5416667 0.2590580    24
## 6      3     1 0.5862069 0.2512315    29
## 7      4     0 0.8529412 0.1292335    34
## 8      4     1 0.7500000 0.1935484    32</code></pre>
</div>
<div id="deskriptive-statistik" class="section level2">
<h2><span class="header-section-number">13.5</span> Deskriptive Statistik</h2>
<p>Neben der grafischen Auswertung von Variablen ist es in R natürlich auch möglich, statistische Masszahlen zu erhalten. Neben <code>summarize()</code> bietet uns R aber auch die Möglichkeit an, einzelne Zahlen direkt zu erhalten.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Mittelwert der Partizipation (=Stimmbeteiligung)</span>
<span class="kw">mean</span>(voto<span class="op">$</span>participated, <span class="dt">na.rm=</span>T)</code></pre></div>
<pre><code>## [1] 0.65</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Median des Geburtsjahr</span>
<span class="kw">median</span>(voto<span class="op">$</span>birthyear)</code></pre></div>
<pre><code>## [1] 1962</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Max und Min</span>
<span class="kw">max</span>(voto<span class="op">$</span>birthyear)</code></pre></div>
<pre><code>## [1] 1999</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(voto<span class="op">$</span>birthyear)</code></pre></div>
<pre><code>## [1] 1927</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Quantile</span>
<span class="kw">quantile</span>(voto<span class="op">$</span>part10, <span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>), <span class="dt">na.rm=</span>T)</code></pre></div>
<pre><code>## 10% 90% 
##   3  10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Varianz und Standardabweichung</span>
<span class="kw">var</span>(voto<span class="op">$</span>part10, <span class="dt">na.rm=</span>T)</code></pre></div>
<pre><code>## [1] 7.915985</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sd</span>(voto<span class="op">$</span>part10, <span class="dt">na.rm=</span>T)</code></pre></div>
<pre><code>## [1] 2.813536</code></pre>
</div>
<div id="ubung" class="section level2">
<h2><span class="header-section-number">13.6</span> Übung</h2>
<div class="rmdcomment">
<p>
Um die neu kennengelernten Befehle anzuwenden, wird folgende kurze Übung vorgeschlagen, welche den Start für die eigene Datenauswertung darstellt.
</p>
<p>
Dabei kann auf die Unterlagen von der Einführung zurückgegriffen werden, wo alle notwendigen Befehle aufgeführt sind.
</p>
<ol style="list-style-type: decimal">
<li>
<p>
Erstelle ein R-Script, in dem du alle Befehle dokumentierst und falls nötig auch kommentierst (mit einem # am Anfang der Linie). Hinweis: in RStudio oben links auf das Symbol mit dem weissen Papier und dem grünen Plus klicken.
</p>
</li>
<li>
<p>
Von ILIAS den voto-Datensatz vom 21. Mai 2017 runterladen. In einem Ordner, das als ‘working directory’ dient abspeichern, und anschliessend in R laden. Hinweis: <code>setwd()</code> und <code>read.table()</code>.
</p>
</li>
<li>
<p>
Anschliessend den Datensatz erkunden und gleichzeitig im Fragebogen (ebenfalls auf ILIAS) die Ausprägungen der Variablen überprüfen. Eine Variable auswählen, die genauer betrachtet werden soll.
</p>
</li>
<li>
<p>
Den Datensatz auf die Variablen reduzieren, die wirklich interessieren, also die ausgewählte Variable und z.B. Abstimmungsentscheid, Partizipation, Alter oder Kanton, falls gewünscht auch eine Untergruppe definieren, die angeschaut werden soll.
</p>
</li>
<li>
<p>
Eine Dummy- oder kategorielle Variable erstellen.
</p>
</li>
<li>
<p>
Versuchen, diese Variable grafisch darzustellen, nach Möglichkeit auch mit einer zweiten Variable kombiniert. Kurz beantworten: wie könnte diese Grafik verbessert werden? Tipp: orientiere dich an den vorgestellten Grafiken.
</p>
</li>
<li>
<p>
R-Script abspeichern, testen ob dieser ohne Fehler durchläuft.
</p>
</li>
</ol>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-vis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r-vis2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
